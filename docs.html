<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dokumentasi Inti Lua - LuaVerse</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Poppins:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="sticky-nav">
        <nav class="container nav-content">
            <a href="index.html" class="logo-text">LuaVerse</a>
            <div class="nav-links-desktop">
                <a href="index.html" class="nav-link">Home</a>
                <a href="docs.html" class="nav-link active">Dokumentasi Inti</a>
                <a href="tutorials.html" class="nav-link">Tutorial</a>
                <a href="community.html" class="nav-link">Komunitas</a>
                <a href="contact.html" class="cta-button nav-cta">Mulai Coding!</a>
            </div>
            <button class="hamburger-menu" aria-label="Toggle navigation">&#9776;</button>
        </nav>
    </header>

    <main>
        <section class="docs-header">
            <div class="container">
                <h1 style="font-size: 3rem; color: var(--color-accent-orange);">Dokumentasi Inti Lua</h1>
                <p style="font-size: 1.2rem; margin-top: 15px;">Penjelasan mendalam, contoh kode, dan kasus penggunaan untuk fitur-fitur terkuat Lua.</p>
            </div>
        </section>

        <section class="docs-content">
            <div class="container" style="display: flex; gap: 40px;">
                
                <aside style="flex: 1; max-width: 280px;">
                    <nav class="docs-sidebar" style="position: sticky; top: 100px;">
                        <h3 style="color: var(--lua-purple-dark); margin-bottom: 20px;">Daftar Isi</h3>
                        <a href="#metatable-full" class="sidebar-link">1. Metatable: OOP & Overloading</a>
                        <a href="#coroutine-full" class="sidebar-link">2. Coroutines: Multitasking</a>
                        <a href="#datatype-full" class="sidebar-link">3. Table Hybrid & Tipe Data</a>
                        <a href="#functions" class="sidebar-link">4. Fungsi & Penutup (Closure)</a>
                    </nav>
                </aside>

                <article style="flex: 3; min-width: 600px;">
                    
                    <h2 id="metatable-full">1. Metatable: Membangun OOP di Lua</h2>
                    <p>
                        **Pengertian:** Metatable adalah table khusus yang mendefinisikan bagaimana table lain (table pemilik) akan berperilaku dalam operasi tertentu. Ini adalah kunci fleksibilitas Lua dan fondasi untuk **Object-Oriented Programming (OOP)** dan *operator overloading*.
                    </p>
                    <h3 style="margin-top: 25px; color: var(--color-accent-blue);">Pilihan Metamethods Kunci:</h3>
                    <ul>
                        <li>`__index`: Dipanggil saat mencari properti yang hilang. Digunakan untuk **Inheritance**.</li>
                        <li>`__newindex`: Dipanggil saat mencoba menetapkan nilai ke properti yang hilang. Digunakan untuk **Read-Only Table**.</li>
                        <li>`__add`, `__sub`, `__mul`: Metamethods untuk *operator overloading*.</li>
                    </ul>
                    
                    <h4 class="code-title" style="color: var(--color-dark);">Contoh Code: Inheritance (Class Structure)</h4>
                    <pre class="code-block">
-- Base Class (Class Prototype)
local ClassHewan = {}
ClassHewan.__index = ClassHewan -- Penting untuk Inheritance

function ClassHewan:new(nama)
    local self = {nama = nama, is_alive = true}
    return setmetatable(self, ClassHewan)
end

function ClassHewan:bersuara()
    print(self.nama .. " membuat suara!")
end

local Kucing = ClassHewan:new("Milo")
Kucing:bersuara() -- Output: Milo membuat suara!
                    </pre>

                    <h2 id="coroutine-full">2. Coroutines: Multitasking Ringan</h2>
                    <p>
                        **Pengertian:** Coroutines adalah bentuk *multitasking* **kooperatif**. Berbeda dengan *thread* (paralel), Coroutine **menyerahkan kontrol** secara eksplisit menggunakan `coroutine.yield()`, dan dapat dilanjutkan dari tempat ia berhenti menggunakan `coroutine.resume()`.
                    </p>
                    <h3 style="margin-top: 25px; color: var(--color-accent-blue);">Pilihan Fungsi Coroutine:</h3>
                    <ul>
                        <li>`coroutine.create(func)`: Membuat Coroutine baru dari sebuah fungsi.</li>
                        <li>`coroutine.resume(co, ...)`: Memulai atau melanjutkan eksekusi Coroutine.</li>
                        <li>`coroutine.yield(...)`: Menangguhkan eksekusi dan mengembalikan nilai ke pemanggil.</li>
                    </ul>
                    
                    <h4 class="code-title" style="color: var(--color-dark);">Contoh Code: Simetri Producer-Consumer</h4>
                    <pre class="code-block">
local function producer()
    local i = 0
    while true do
        i = i + 1
        -- Menghasilkan nilai dan menangguhkan diri
        local konsumsi = coroutine.yield(i) 
        print("Producer menerima:", konsumsi)
    end
end

local co = coroutine.create(producer)

-- Consumer memanggil resume, lalu mengirim nilai kembali ke producer
print(coroutine.resume(co)) -- Output: true, 1
print(coroutine.resume(co, "Item Diterima!")) -- Output: Producer menerima: Item Diterima!, true, 2
                    </pre>

                    <h2 id="datatype-full">3. Table Hybrid & Tipe Data</h2>
                    <p>
                        **Pengertian:** Lua hanya memiliki **delapan tipe data primitif** (`nil`, `boolean`, `number`, `string`, `userdata`, `thread`, `function`, dan yang paling penting, `table`). Tipe `table` bertindak sebagai *array*, *hash map*, *object*, dan *module* secara bersamaan.
                    </p>
                    <h3 style="margin-top: 25px; color: var(--color-accent-blue);">Pilihan Implementasi Table:</h3>
                    <ul>
                        <li>**Array Sequential:** Menggunakan kunci numerik berurutan. Dioptimalkan untuk akses cepat.</li>
                        <li>**Hash Map (Dictionary):** Menggunakan kunci string atau bahkan kunci table lain.</li>
                        <li>**Hybrid:** Menggabungkan array dan map dalam satu struktur.</li>
                    </ul>
                    
                    <h4 class="code-title" style="color: var(--color-dark);">Contoh Code: Table Hybrid dan Nilai Default</h4>
                    <pre class="code-block">
local inventory = {
    -- Array part
    "Pedang", 
    "Perisai", 
    
    -- Map part
    slots = 5,
    owner = "Dev"
}

-- Array: Akses berdasarkan posisi (1-based index)
print(inventory[2])       -- Output: Perisai

-- Map: Akses berdasarkan kunci
print(inventory.owner)    -- Output: Dev

-- Nilai yang tidak ada menghasilkan nil
print(inventory.gold)     -- Output: nil
                    </pre>
                    
                    <h2 id="functions">4. Fungsi & Penutup (Closure)</h2>
                    <p>
                        **Pengertian:** Fungsi adalah tipe data *first-class* di Lua, artinya fungsi dapat disimpan dalam variabel, dilewatkan sebagai argumen, dan dikembalikan oleh fungsi lain. **Closure** terjadi ketika sebuah fungsi bersarang ('nested function') menyimpan akses ke variabel lokal dari fungsi luarnya.
                    </p>
                    <h4 class="code-title" style="color: var(--color-dark);">Contoh Code: Membuat Counter dengan Closure</h4>
                    <pre class="code-block">
-- Fungsi luar (factory)
function createCounter()
    local count = 0 -- Variabel lokal yang 'ditangkap' (upvalue)
    return function()
        count = count + 1
        return count
    end
end

local counterA = createCounter()
local counterB = createCounter()

print(counterA()) -- Output: 1
print(counterA()) -- Output: 2
print(counterB()) -- Output: 1 (Memiliki 'count' yang terpisah)
                    </pre>
                </article>
            </div>
        </section>

    </main>

    <footer class="main-footer">
        <div class="container footer-grid">
            <div class="footer-about">
                <h4 class="footer-heading">LuaVerse</h4>
                <p>Situs pembelajaran bahasa Lua yang fokus pada efisiensi, kecepatan, dan aplikasi di dunia nyata.</p>
                <p class="copyright">&copy; 2024 LuaVerse. Dibuat dengan semangat open source.</p>
            </div>
            
            <div class="footer-links">
                <h4 class="footer-heading">Tautan</h4>
                <a href="docs.html" class="footer-link">Dokumentasi</a>
                <a href="tutorials.html" class="footer-link">Tutorial Lanjutan</a>
                <a href="contact.html" class="footer-link">Ajukan Pertanyaan</a>
            </div>
            
            <div class="footer-community">
                <h4 class="footer-heading">Komunitas</h4>
                <div class="social-icons">
                    <a href="#" class="social-link">Discord</a>
                    <a href="#" class="social-link">GitHub</a>
                    <a href="#" class="social-link">Twitter/X</a>
                </div>
                <p class="footer-contact">Email: info@luaverse.dev</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
